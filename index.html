<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <style type="text/css">
    	*{
    		list-style: none;
    	}
    	ul{
    		width: 100%;
    		height: 100%;
    		float: left;
    	}
    	ul li{
    		width: 50%;
    		height: 300px;
    		background: #008000;
    		margin-bottom: 20px;
    		float: left;
    		font-size: 80px;
    		text-align: center;
    		line-height: 300px;
    		color: #fff;
    	}
    	ul li a{
    		text-decoration: none;
    		color: #fff;
    	}
    </style>
    <script src="jquery-2.1.4.min.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
	
</body>
<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.3&key=51bd1988fd61526022fae192de188cdc"></script>
<script type="text/javascript">
			function getLocation(){ 
			if (navigator.geolocation){ 
		    	navigator.geolocation.getCurrentPosition(showPosition,showError); 
		  	}else{ 
		    	alert("浏览器不支持地理定位。"); 
		  	} 
		}
		function showError(error){ 
		  	switch(error.code) { 
		    	case error.PERMISSION_DENIED: 
		      	alert("定位失败,用户拒绝请求地理定位"); 
		      	break; 
		    	case error.POSITION_UNAVAILABLE: 
		      	alert("定位失败,位置信息是不可用"); 
		      	break; 
		    	case error.TIMEOUT: 
		      	alert("定位失败,请求获取用户位置超时"); 
		      	break; 
		    	case error.UNKNOWN_ERROR: 
		      	alert("定位失败,定位系统失效"); 
		      	break; 
		  	} 
		}
		function showPosition(position){ 
		  	var lat = position.coords.latitude; //纬度 
		  	var lag = position.coords.longitude; //经度 
		  	alert('纬度:'+lat+',经度:'+lag); 
		  	 var map = new AMap.Map('container',{
	            resizeEnable: true,
	            zoom: 10,
	            center: [lag, lat]
	        });
	        AMap.plugin(['AMap.ToolBar','AMap.AdvancedInfoWindow'],function(){
			    //创建并添加工具条控件
			    var toolBar = new AMap.ToolBar();
			    map.addControl(toolBar);
	//		    创建高级信息窗体并在指定位置打开
			    var infowindow = new AMap.AdvancedInfoWindow({
			      content: '<div class="info-title">高德地图</div><div class="info-content">'+
			            '<img src="http://webapi.amap.com/images/amap.jpg">'+
			            '高德是中国领先的数字地图内容、导航和位置服务解决方案提供商。<br>'+
			            '<a target="_blank" href="http://mobile.amap.com/">点击下载高德地图</a></div>',
			      offset: new AMap.Pixel(0, -30)
			    });
			    infowindow.open(map,[lag, lat]);
			})
		}
		getLocation();
</script>
</html>
